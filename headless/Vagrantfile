Vagrant.configure('2') do |config|
	config.vm.network "forwarded_port", guest: 8080, host: 8086
	config.vm.synced_folder ".", "/vagrant", disabled: true
        config.ssh.forward_agent = true
	SCRIPT_DIR = File.dirname(__FILE__) << '/'

	case ENV['VAGRANT_DISTRO']
	when 'archlinux'
		config.vm.box = 'archlinux_x86_64'
		config.vm.box_url = 'http://cloud.terry.im/vagrant/archlinux-x86_64.box'
		DEPENDENCIES = "archlinux_deps.sh"
	when 'debian'
		config.vm.box = 'jessie_x86_64'
		config.vm.box_url = 'http://static.gender-api.com/debian-8-jessie-rc2-x64-slim.box'
		DEPENDENCIES = "debian_deps.sh"
	else
		config.vm.box = 'ubuntu_x86_64'
		config.vm.box_url = 'https://github.com/kraksoft/vagrant-box-ubuntu/releases/download/14.10/ubuntu-14.10-amd64.box'
		DEPENDENCIES = "debian_deps.sh"
	end

        config.vm.provision "shell" do |s|
                s.path  = SCRIPT_DIR + DEPENDENCIES
        end

        config.vm.provision "shell" do |s|
                s.path  = SCRIPT_DIR + 'provision.sh'
        end
end

